<!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>Changelog 19.10.15：动态头像 | AvataredHacker Demo</title>

  
  <meta name="author" content="kuwii">
  

  
  <meta name="description" content="当初决定 fork 并且改出这么一个主题就是想搞一个头像出来，最好还能有点炫酷的特效。
最终效果如下所示了，在网页上移动鼠标就能看到效果了。对于手机、平板和带触摸屏的设备，手指在网页随便什么地方戳一下也有一样的效果。

  
    
    
  


  var avatarSettings2 ">
  

  
  
  <meta name="keywords" content="avatar,feature,changelog">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="Changelog 19.10.15：动态头像">

  <meta property="og:site_name" content="AvataredHacker Demo">

  
  <meta property="og:image" content="/AvataredHacker/favicon.ico">
  

  <link href="/AvataredHacker/favicon.ico" rel="icon">
  <link rel="alternate" href="/AvataredHacker/atom.xml" title="AvataredHacker Demo" type="application/atom+xml">
  <link rel="stylesheet" href="/AvataredHacker/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
    <div class="site-branding">
      <h1 class="site-avatar">
        <div>
          
            <a href="/AvataredHacker/"><img src="/AvataredHacker/images/avatar_body.png" /></a>
            <a href="/AvataredHacker/"><img id="avatar-eyeball" src="/AvataredHacker/images/avatar_eyeball.png" /></a>
          
        </div>
      </h1>
      <p class="site-description">hello, world</p>
    </div>
    <nav class="site-navigation">
      <ul>
        
          <li><a href="/AvataredHacker/">主页</a></li>
        
          <li><a href="/AvataredHacker/archives">归档</a></li>
        
          <li><a href="/AvataredHacker/categories">分类</a></li>
        
          <li><a href="/AvataredHacker/tags">标签</a></li>
        
          <li><a href="/AvataredHacker/about">关于</a></li>
        
      </ul>
    </nav>
  </header>


    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>Changelog 19.10.15：动态头像</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/AvataredHacker/changelog-19-10-15/" rel="bookmark">
        <time class="entry-date published" datetime="2019-10-14T16:01:00.000Z">
          2019-10-15
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>当初决定 fork 并且改出这么一个主题就是想搞一个头像出来，最好还能有点<del>炫酷的</del>特效。</p>
<p>最终效果如下所示了，在网页上移动鼠标就能看到效果了。对于手机、平板和带触摸屏的设备，手指在网页随便什么地方戳一下也有一样的效果。</p>
<div style="position:relative;text-align:center;width:100%;height:180px;">
  <div style="position:relative;display:inline-block;height:180px;width:320px;">
    <img style="position:absolute;top:0;left=0" src="http://kuwii.xyz/AvataredHacker/images/avatar_body.png">
    <img id="changelog-avatar-demo-eyeball" style="position:absolute;top:0;left=0" src="http://kuwii.xyz/AvataredHacker/images/avatar_eyeball.png">
  </div>
</div>
<script>
  var avatarSettings2 = {
      maxDistance: 25,
      sensitivity: 0.008,
  };
  var avatarState2 = {};
  var moveEyeBall2 = function(e) {
      var mPos = e || window.event;
      var mPosX = mPos.pageX, mPosY = mPos.pageY;      
      var subX = avatarState2.wCenterX - mPosX, subY = avatarState2.wCenterY - mPosY;
      var distance = Math.sqrt(subX*subX + subY*subY);
      var sigmoid = (1 / (1 + Math.exp(0 - distance * avatarSettings2.sensitivity)) - 0.5) * 2;
      var newPosX = avatarState2.wClientX - sigmoid * avatarSettings2.maxDistance * subX / distance;
      var newPosY = avatarState2.wClientY - sigmoid * avatarSettings2.maxDistance * subY / distance;
      avatarState2.avatar.style.left = newPosX - avatarState2.wParentX + 'px';
      avatarState2.avatar.style.top = newPosY - avatarState2.wParentY + 'px';
  };
  var moveEyeBallMobile2 = function(e) {
    var touch = e.touches[0];
    var mPos = {
      pageX: touch.pageX,
      pageY: touch.pageY
    };
    moveEyeBall2(mPos);
  }
  new function() {
    var avatar = document.getElementById('changelog-avatar-demo-eyeball');
    var wClientX = avatar.offsetLeft, wClientY = avatar.offsetTop;
    var cur = avatar.offsetParent;
    while (cur !== null){
      wClientX += cur.offsetLeft;
      wClientY += cur.offsetTop;
      cur = cur.offsetParent;
    }
    var wParentX = wClientX - avatar.offsetLeft, wParentY = wClientY - avatar.offsetTop;
    var wCenterX = wClientX + avatar.offsetWidth / 2, wCenterY = wClientY + avatar.offsetHeight / 2;
    avatarState2 = {
      avatar: avatar,
      wClientX: wClientX,
      wClientY: wClientY,
      wParentX: wParentX,
      wParentY: wParentY,
      wCenterX: wCenterX,
      wCenterY: wCenterY
    };
    document.addEventListener("mousemove", moveEyeBall2);
    document.addEventListener("touchstart", moveEyeBallMobile2);
    document.addEventListener("touchmove", moveEyeBallMobile2);
  }();
</script>

<p>目前只简单地实现了一个“指哪里看哪里”的效果，用“最大距离”和“灵敏度”两个参数控制“眼球”的移动，前者控制最大的移动距离，后者值越高越快移动到最大距离。</p>
<p>一开始发现按距离等比例移动眼球效果看起来有点假，所以改成了使用了Sigmoid函数计算。<del>（嗯，苦学炼金术最后全用到这里了）</del></p>
<p>头像可以任意替换，如果不希望使用动态效果，也可以使用静态头像。</p>
<p>其他方面的修改还有：</p>
<ul>
<li>主色调方面做了一些修改，从 Hacker 的红色调改成了蓝色调，css 里 hover 相关的效果也略作了调整</li>
<li>修改了网页标题的生成规则，把 subtitle 和文章的 title 改放到了最前面</li>
</ul>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/AvataredHacker/categories/features/">features</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/AvataredHacker/tags/avatar/">avatar</a><a href="/AvataredHacker/tags/feature/">feature</a><a href="/AvataredHacker/tags/changelog/">changelog</a>
    </span>
    

    </div>

    
  </div>
</article>

  






    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/kuwii/AvataredHacker" target="_blank">AvataredHacker</a>
    </br>
    
    &copy; 2020 kuwii
    
  </p>
</footer>
    
    
  <script>
    var avatarSettings = {
      maxDistance: "15",
      sensitivity: "0.01",
    }
  </script>
  <script src="/AvataredHacker/js/avatar.js"></script>

    
  
<script>
  MathJax = {
    tex: {
      packages: ['base'],
      inlineMath: [
        ['\\(', '\\)']
      ],
      displayMath: [
        ['$$', '$$'],
        ['\\[', '\\]']
      ],
      processEscapes: true,
      processEnvironments: true,
      processRefs: true,
      digits: /^(?:[0-9]+(?:\{,\}[0-9]{3})*(?:\.[0-9]*)?|\.[0-9]+)/,
      tags: 'none',
      tagSide: 'right',
      tagIndent: '0.8em',
      useLabelIds: true,
      multlineWidth: '85%',
      maxMacros: 1000,
      maxBuffer: 5 * 1024,
      baseURL: (document.getElementsByTagName('base').length === 0) ? '' : String(document.location).replace(/#.*$/, '')
    },
    mml: {
      parseAs: 'html',
      forceReparse: false,
      parseError: function (node) {
        this.error(this.adaptor.textContent(node).replace(/\n.*/g, ''));
      }
    }
  };
</script>

  <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-svg.js"></script>


    
  </div>
</div>
</body>
</html>